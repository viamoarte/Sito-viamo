<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Dettagli dell'opera di ViAmo">
    <meta name="keywords" content="ViAmo, Vincenza Amodio, arte, street art">
    <meta name="author" content="ViAmo Art">
    <title>ViAmo - Dettagli Opera</title>
    <style>
        body { font-family: 'Arial', sans-serif; margin: 0; padding: 0; background-color: #f0f0f0; }
        header { background-color: #2c3e50; color: white; padding: 15px; text-align: center; }
        nav { background-color: #34495e; padding: 10px; text-align: center; }
        nav a { color: white; margin: 0 20px; text-decoration: none; font-size: 1.1em; }
        nav a:hover { text-decoration: underline; }
        .artwork-details { margin: 20px; padding: 20px; background: white; border-radius: 10px; box-shadow: 0 0 15px rgba(0,0,0,0.1); text-align: center; }
        .artwork-details img { max-width: 100%; height: auto; max-height: 500px; object-fit: contain; border-radius: 5px; }
        .artwork-details p#artwork-desc { text-align: justify; }
        .error { color: red; text-align: center; margin: 20px; }
        form { display: flex; flex-direction: column; max-width: 450px; margin: 20px auto; }
        input, textarea { margin: 10px 0; padding: 12px; border: 1px solid #ccc; border-radius: 5px; font-size: 1em; }
        button { padding: 12px; background-color: #2c3e50; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 1em; }
        button:hover { background-color: #34495e; }
        .back-link { display: inline-block; margin: 20px; color: #2c3e50; text-decoration: none; font-size: 1.1em; }
        .back-link:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <header>
        <h1>ViAmo - Dettagli Opera</h1>
    </header>
    <nav>
        <a href="index.html">Home</a>
        <a href="index.html#gallery">Galleria</a>
        <a href="index.html#about">Chi Sono</a>
        <a href="index.html#contact">Contatti</a>
    </nav>

    <section class="artwork-details">
        <h2 id="artwork-title">Caricamento...</h2>
        <img id="artwork-image" alt="Immagine dell'opera" loading="lazy">
        <h3 id="artwork-title-text"></h3>
        <p id="artwork-desc"></p>
        <p id="artwork-dimensions"></p>
        <p id="artwork-price"></p>
        <p class="error" id="error-message" style="display: none;">Opera non trovata.</p>

        <h3>Chiedi Informazioni per Questa Opera</h3>
        <form id="inquiry-form">
            <input type="text" name="user_name" placeholder="Il tuo nome" required aria-label="Il tuo nome">
            <input type="email" name="user_email" placeholder="La tua email" required aria-label="La tua email">
            <textarea name="message" id="inquiry-message" placeholder="Il tuo messaggio" rows="5" required aria-label="Messaggio di richiesta informazioni"></textarea>
            <button type="submit" aria-label="Invia richiesta informazioni">Invia</button>
        </form>
        <a href="index.html#gallery" class="back-link" aria-label="Torna alla galleria opere">Torna alla Galleria Opere</a>
    </section>

    <script>
        // Carica i dati salvati in localStorage
        const artworks = JSON.parse(localStorage.getItem('artworks')) || [];
        
        // Ottieni l'ID dall'URL
        const urlParams = new URLSearchParams(window.location.search);
        const id = parseInt(urlParams.get('id'));

        // Cerca l'opera con l'ID specificato
        const artwork = artworks.find(art => art.id === id);

        // Visualizza i dettagli dell'opera
        if (artwork) {
            document.getElementById('artwork-title').textContent = artwork.title;
            document.getElementById('artwork-title-text').textContent = artwork.title;
            document.getElementById('artwork-image').src = artwork.image;
            document.getElementById('artwork-desc').textContent = artwork.desc;
            document.getElementById('artwork-dimensions').textContent = `Dimensioni: ${artwork.dimensions}`;
            document.getElementById('artwork-price').textContent = `Prezzo: â‚¬${artwork.price}`;
            document.getElementById('error-message').style.display = 'none';
            // Pre-compila il campo messaggio con il titolo dell'opera
            document.getElementById('inquiry-message').value = `Richiesta informazioni per l'opera "${artwork.title}"`;
        } else {
            document.getElementById('artwork-title').textContent = 'Opera non trovata';
            document.getElementById('error-message').style.display = 'block';
        }

        // Gestione del form di richiesta informazioni
        document.getElementById('inquiry-form').addEventListener('submit', e => {
            e.preventDefault();
            const form = e.target;
            const successMessage = document.createElement('p');
            successMessage.textContent = 'Richiesta inviata con successo!';
            successMessage.style.color = 'green';
            form.appendChild(successMessage);
            setTimeout(() => successMessage.remove(), 3000);
            form.reset();
            // Ripristina il messaggio predefinito dopo il reset
            if (artwork) {
                document.getElementById('inquiry-message').value = `Richiesta informazioni per l'opera "${artwork.title}"`;
            }
        });
    </script>
</body>
</html>